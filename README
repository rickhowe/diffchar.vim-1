This is a mirror of http://www.vim.org/scripts/script.php?script_id=4932

This script has been developed in order to make diff mode more useful. DiffText does not show the exact difference, but this script will highlight its difference, character by character - so called DiffChar.

Use this script just after diff command. DiffText area will be narrowed down to show the DiffChar. You can use this script in non-diff'ed usual mode as well.

For example, diff command shows: (<|DiffText area|>)

     (file A) The <|swift brown fox jumped over the lazy|> dog.
     (file B) The <|lazy fox jumped over the swift brown|> dog.

then this script will narrow down the DiffText area:

     (file A) The <|swift brown|> fox jumped over the <|lazy|> dog.
     (file B) The <|lazy|> fox jumped over the <|swift brown|> dog.

Sample commands
:[range]SDChar - Highlight difference units for [range]
:[range]RDChar - Reset the highlight of difference units for [range]

Sample keymaps
<F7> - toggle the highlight/reset of difference units for all lines
<F8> - toggle the highlight/reset of difference units for current line
[b   - jump cursor to the start position of the previous difference unit
]b   - jump cursor to the start position of the next difference unit
[e   - jump cursor to the end position of the previous difference unit
]e   - jump cursor to the end position of the next difference unit

Global variables (and tab local variables when using t:)
g:DiffUnit - type of difference unit
    "Char"   : any single character (default)
    "Word1"  : \w\+ word and any \W single character
    "Word2"  : non-space and space words
    "Word3"  : \< or \> character class boundaries
    "CSV(,)" : separated by a character such as ',', ';', and '\t'
g:DiffColors - matching colors for changed unit pairs
    0   : always DiffText (default)
    1   : 4 colors in fixed order
    2   : 8 colors in fixed order
    3   : 16 colors in fixed order
    100 : all available colors in dynamic random order
        (notes : always DiffAdd for added units)
g:DiffUpdate - interactively updating of highlightings while editing
    0 : disable (default)
    1 : enable
      (notes : available on vim 7.4)
g:DiffAlgorithm - difference algorithm
    "ONP"   : S.Wu, U.Manber, G.Myers and W.Miller,
              "An O(NP) Sequence Comparison Algorithm" (default)
    "OND"   : E.W.Myers, "An O(ND) Difference Algorithm and Its Variations"
    "Basic" : basic algorithm using edit graph and shortest edit distance

This script has been always positively supporting mulltibyte characters.

Update : 4.6
* Fixed to correctly show the colors of changed units in one-by-one defined order of g:DiffColors. Since an added unit was improperly counted as changed one, some colors were skipped and not shown. The first changed unit is now always highlighted with DiffText in any color mode.
